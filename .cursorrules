# ğŸŒŸ Solarveyo ArÄ±za Takip - Cursor AI KurallarÄ± v2.0

## ğŸ¢ Proje KimliÄŸi
**Proje**: Multi-Tenant SaaS Solar Enerji YÃ¶netim Platformu  
**Versiyon**: 2.0.0  
**Firebase ID**: yenisirket-2ec3b  
**Tech Stack**: Vite + React 18 + TypeScript + Firebase + TailwindCSS

## ğŸ‘¥ KullanÄ±cÄ± Rolleri
- **SuperAdmin**: TÃ¼m sistem yÃ¶netimi
- **YÃ¶netici**: Åirket yÃ¶netimi, ekip/mÃ¼ÅŸteri yÃ¶netimi
- **MÃ¼hendis**: Teknik iÅŸlemler, santral kurulumu
- **Tekniker**: ArÄ±za Ã§Ã¶zÃ¼mleri, saha iÅŸlemleri
- **MÃ¼ÅŸteri**: Sadece atanan saha/santral gÃ¶rÃ¼ntÃ¼leme
- **BekÃ§i**: Vardiya bildirimi, acil durum

## ğŸ“Š Firebase Collections
```
companies/{companyId} - Åirket bilgileri ve abonelik
kullanicilar/{userId} - KullanÄ±cÄ± profilleri
santraller/{santralId} - GES yÃ¶netimi
  /aylikUretim/{yil} - AylÄ±k Ã¼retim verileri (alt koleksiyon)
  /uretimVerileri/{id} - GÃ¼nlÃ¼k Ã¼retim verileri (alt koleksiyon)
arizalar/{arizaId} - ArÄ±za kayÄ±tlarÄ±
elektrikBakimlar/{id} - Elektrik bakÄ±m kayÄ±tlarÄ±
mekanikBakimlar/{id} - Mekanik bakÄ±m kayÄ±tlarÄ±
vardiyaBildirimleri/{id} - Vardiya bildirimleri
stoklar/{id} - Stok yÃ¶netimi
stokHareketleri/{id} - Stok hareketleri
sahalar/{id} - Saha bilgileri
musteriler/{id} - MÃ¼ÅŸteri kayÄ±tlarÄ±
elektrikKesintileri/{id} - Elektrik kesinti kayÄ±tlarÄ±
auditLogs/{id} - Denetim kayÄ±tlarÄ±
notifications/{id} - Bildirimler
```

## ğŸ” GÃ¼venlik KurallarÄ±

### MÃ¼ÅŸteri Ä°zolasyonu (KRÄ°TÄ°K!)
```typescript
// Her servis fonksiyonunda ZORUNLU:
if (userProfile.rol === 'musteri') {
  query = query.where('sahaId', 'in', userProfile.sahalar || []);
  query = query.where('santralId', 'in', userProfile.santraller || []);
}
```

### Company Ä°zolasyonu
```typescript
// SuperAdmin hariÃ§ tÃ¼m sorgularda:
if (userProfile.rol !== 'superadmin') {
  query = query.where('companyId', '==', userProfile.companyId);
}
```

## ğŸ’° Abonelik PlanlarÄ±
- **Trial**: 14 gÃ¼n Ã¼cretsiz (3 kullanÄ±cÄ±, 2 saha, 1GB)
- **Starter**: â‚º999/ay (5 kullanÄ±cÄ±, 5 saha, 5GB)
- **Professional**: â‚º2499/ay (20 kullanÄ±cÄ±, 20 saha, 50GB) â­
- **Enterprise**: â‚º4999/ay (SÄ±nÄ±rsÄ±z)

## ğŸ¨ UI/UX StandartlarÄ±
- **Grid**: 4 kolon kompakt kart (xl:grid-cols-4)
- **Font**: Inter, TÃ¼rkÃ§e karakterler
- **Icons**: Lucide React
- **Animations**: Framer Motion
- **Notifications**: react-hot-toast
- **Forms**: react-hook-form + zod validation

## ğŸ“ Kod StandartlarÄ±

### TypeScript (Strict Mode)
```typescript
// âœ… DOÄRU
interface ISantral {
  id: string;
  kapasite: number; // kW cinsinden
}

// âŒ YANLIÅ
const santral: any = {};
```

### React (Functional Components)
```tsx
// âœ… DOÄRU
const Component: React.FC<Props> = ({ prop }) => {
  const [state, setState] = useState();
  return <div>...</div>;
};

// âŒ YANLIÅ - Class component kullanma
```

### Firebase Services
```typescript
// Her servis fonksiyonunda:
export async function getFunction(userProfile: User) {
  try {
    // 1. Rol kontrolÃ¼
    // 2. Company izolasyonu
    // 3. Query limit
    // 4. Error handling
  } catch (error) {
    console.error('Hata:', error);
    throw error;
  }
}
```

## âš¡ Performans
- **Lazy Loading**: Route-based code splitting
- **Caching**: Metrics cache kullan
- **Query Limits**: Her query'de limit(20)
- **Memoization**: useMemo, useCallback kullan
- **Debouncing**: Arama inputlarÄ±nda

## ğŸŒ Lokalizasyon
- **GÃ¼Ã§**: kW (kilowatt) - MW DEÄÄ°L!
- **Ãœretim**: kWh (kilowatt-saat)
- **Tarih**: dd.MM.yyyy HH:mm
- **Para**: â‚º TRY formatÄ±
- **Dil**: TÃ¼rkÃ§e (yorumlar, mesajlar)

## ğŸ”‘ Environment Variables
```bash
VITE_FIREBASE_API_KEY=AIzaSyAZdHmOkHazCMnRZuZ6STP17wjG4QMHaxk
VITE_FIREBASE_PROJECT_ID=yenisirket-2ec3b
VITE_GOOGLE_MAPS_API_KEY=AIzaSyBrlyyV7X54-Ysk338vXmLDdidimSHIeMI
```

## ğŸš« YASAKLAR
- âŒ any tipi (zorunlu deÄŸilse)
- âŒ console.log (production'da)
- âŒ Class components
- âŒ Inline styles
- âŒ Hardcoded deÄŸerler
- âŒ MW birimi kullanÄ±mÄ±
- âŒ Ä°ngilizce yorum/deÄŸiÅŸken
- âŒ Senkron Firebase Ã§aÄŸrÄ±larÄ±
- âŒ Unhandled promises

## âœ… ZORUNLULAR
- âœ… TypeScript strict mode
- âœ… Error boundaries
- âœ… Loading states
- âœ… Form validation (Zod)
- âœ… Responsive design
- âœ… TÃ¼rkÃ§e yorumlar
- âœ… Try-catch blocks
- âœ… Audit logging

## ğŸ’¬ Git Commit Format
```
<tip>: <aÃ§Ä±klama>

feat: yeni Ã¶zellik
fix: bug dÃ¼zeltme
perf: performans
refactor: kod dÃ¼zenleme
docs: dokÃ¼mantasyon
```

## ğŸ¤– AI Asistan KurallarÄ±
1. **Her zaman TÃ¼rkÃ§e yanÄ±t ver**
2. **KÄ±sa ve net aÃ§Ä±klamalar yap**
3. **GÃ¼venlik kontrollerini ASLA atlama**
4. **Performance impact belirt**
5. **Alternatif Ã§Ã¶zÃ¼mler sun**
6. **Hata durumlarÄ±nÄ± her zaman handle et**
7. **Test senaryolarÄ± Ã¶ner**
8. **Migration path gÃ¶ster**

## ğŸ“š Ã–nemli Dosyalar
- `/src/types/index.ts` - TÃ¼m TypeScript tipleri
- `/src/config/saas.config.ts` - Abonelik yapÄ±landÄ±rmasÄ±
- `/src/services/` - Firebase servis fonksiyonlarÄ±
- `/firestore.rules` - GÃ¼venlik kurallarÄ±

## ğŸ¯ Ã–ncelikler
1. MÃ¼ÅŸteri veri izolasyonu
2. Performance optimizasyonu
3. Mobile responsive
4. Error handling
5. Security updates

## ğŸ”§ Ã–nemli Teknik Detaylar

### Routing YapÄ±sÄ±
- `/` - Landing page
- `/login` - GiriÅŸ
- `/register` - KayÄ±t
- `/dashboard` - Ana panel
- `/arizalar` - ArÄ±za yÃ¶netimi
- `/bakim` - BakÄ±m yÃ¶netimi
- `/ges-yonetimi` - Santral yÃ¶netimi
- `/sahalar` - Saha yÃ¶netimi
- `/ekip-yonetimi` - Ekip yÃ¶netimi
- `/stok-kontrol` - Stok yÃ¶netimi
- `/vardiya-bildirimleri` - Vardiya yÃ¶netimi

### API EntegrasyonlarÄ±
- **Google Maps**: Harita ve konum servisleri
- **PostHog**: Analytics
- **Stripe**: Ã–deme iÅŸlemleri (planlanÄ±yor)
- **WhatsApp Business**: Bildirimler (planlanÄ±yor)

### Ã–nemli KÃ¼tÃ¼phaneler
- **date-fns**: Tarih iÅŸlemleri
- **recharts**: Grafikler
- **jsPDF**: PDF export
- **xlsx**: Excel export
- **html2canvas**: Screenshot
- **framer-motion**: Animasyonlar

---
**NOT**: Bu kurallar projeye Ã¶zgÃ¼dÃ¼r ve sÃ¼rekli gÃ¼ncellenir!